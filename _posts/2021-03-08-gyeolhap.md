---
title: App 개발일지 | 난생처음 앱 개발 일지(3) (2021 3월 둘째주)
tags: [iOS, swift]
date: 2021-03-08 16:35:00 +09:00
categories: [iOS App 개발]

---

예능 방송 "지니어스"에 나왔던 "결합" 게임을 만들고 있습니다.  
앱을 만들면서 겪은 문제와 해결방안 위주로 기록을 남깁니다.

[게임 방법 (github)](https://github.com/taelee42/gyeolhap#-how-to-play)


<!--more-->
---


# 🦊 개발일지


## 앞으로 해야 할일

### 스테이지 화면
- [ ] 스테이지 많아지면 스테이지를 스크롤하기 힘들기 때문에 기존 화면의 스크롤을 기억하거나, 클리어하지 않은 스테이지가 스테이지화면에 디폴트로 나타나게 스크롤하기

### 게임 종료 팝업메뉴
- [ ] 지난 주에 만들어 놓은 뷰에 기능(액션) 붙이기
  - [ ] 다음 스테이지, 다시하기, 메뉴 각각에 맞는 화면으로 넘기기

## 2021-03-08


[Introducing Realm: Building Modern Swift Apps with Realm Database(Ray Wenderlich)](https://www.raywenderlich.com/48-introducing-realm-building-modern-swift-apps-with-realm-database)
위 tutorial을 보면서 공부하고 제 코드에 적용하고 있습니다.

```swift
override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)
    itemsToken = items?.observe { [weak tableView] changes in
      guard let tableView = tableView else { return }

      switch changes {
      case .initial:
        tableView.reloadData()
      case .update(_, let deletions, let insertions, let updates):
        tableView.applyChanges(deletions: deletions, insertions: insertions, updates: updates)
      case .error: break
      }
    }
  }
```

여기서 applyChanges에서 문제가 생겼다.
`Value of type 'UITableView' has no member 'applyChanges'`
이런 에러메세지가 나왔다.

에러메시지 검색을 통해 나온 realm 공식 블로그를 보고 고쳤다.
https://academy.realm.io/posts/live-objects-fine-grained-notifications-realm-update/

~아마 스위프트 버전과 관계된게 아닐까 싶다. 예전에는 UITableView멤버로 applyChanges가 있었지만 이제는 다르게 써야하는 그런게 아닐까?~

```swift
        case .initial:
          tableView.reloadData()
        case .update(_, let deletions, let insertions, let updates):
            self.tableView.beginUpdates()
            self.tableView.insertRows(at: insertions.map {IndexPath(row: $0, section: 0)}, with: .automatic)
            self.tableView.reloadRows(at: updates.map {IndexPath(row: $0, section: 0)}, with: .automatic)
            self.tableView.deleteRows(at: deletions.map {IndexPath(row: $0, section: 0)}, with: .automatic)
            self.tableView.endUpdates()
        case .error: break
`
case 부분을 이렇게 바꾸니 해결되었다.

```
>수정  
알고보니 튜토리얼에서 applyChanges를 tablewView의 extenstion으로 설정해준것이었다.  


Realm적용을 마치고 Realm관련 기초 코드들을 포스팅했습니다.  
[Realm 치트 시트](https://taelee42.github.io/realm/2021/03/09/realm.html)




## 2021-03-09

계속 아이폰에서만 작업하다가 잠시 아이패드에서 돌려봤는데 비율이 심하게 무너져있는 것을 확인하고 오토레이아웃을 수정했습니다.
<figure>
<img data-action="zoom" src='{{ "/assets/images/2021-03-08-gyeolhap/1아이패드 오토레이아웃 수정전.png" | relative_url }}' width=300 alt='absolute'>
<figcaption>
수정전: 밑에 정답 시트 부분이 상당히 작습니다.
</figcaption>
</figure>
<figure>
<img data-action="zoom" src='{{ "/assets/images/2021-03-08-gyeolhap/2아이패드 오토레이아웃 수정후.png" | relative_url }}' width=300 alt='absolute'>
<figcaption>
수정후: 정답시트 부분을 전체 크기의 비율로 잡아서 항상 일정 수준의 크기를 갖을 수 있도록 했습니다.
</figcaption>
</figure>


## 2021-03-10

드디어 메인화면을 만들고 있습니다.
이 결합앱을 처음 만들 때 발목을 잡던 **오토 레이아웃**에 많이 익숙해져서 화면을 만드는데 큰 어려움이 없어졌습니다.
왼쪽이 피그마로 작업한 메인화면이고 오른쪽이 실제 오토레이아웃으로 만든 화면입니다.

<img data-action="zoom" src='{{ "/assets/images/2021-03-08-gyeolhap/4피그마 메인화면.png" | relative_url }}' width=300 alt='absolute'>
<img data-action="zoom" src='{{ "/assets/images/2021-03-08-gyeolhap/3메인화면 오토레이아웃.png" | relative_url }}' width=250 alt='absolute'>

위에 네비게이션 바는 hidden속성을 주어 실제 앱구동시에는 보이지 않습니다.

다만 뒤에서 네이게이션 바를 사용하는데 거기에도 네비게이션 바가 사라질것 같습니다.
만약 사라진다면 직접 타이틀과 버튼들을 만들어줘야 할것 같습니다.


[문제1]

<figure>
<img data-action="zoom" src='{{ "/assets/images/2021-03-08-gyeolhap/5아웃렛 연결시 에러.png" | relative_url }}' width=500 alt='absolute'>
<figcaption>

</figcaption>
</figure>

- 참고 : [Could not insert new outlet connection(github)
](https://stackoverflow.com/questions/29923881/could-not-insert-new-outlet-connection-could-not-find-any-information-for-the-c)

```swift
@IBOutlet weak var playButton: UIButton!
```


<figure>
<img data-action="zoom" src='{{ "/assets/images/2021-03-08-gyeolhap/6에러 메세지 확대.png" | relative_url }}' width=500 alt='absolute'>
<figcaption>

</figcaption>
</figure>
<figure>
<img data-action="zoom" src='{{ "/assets/images/2021-03-08-gyeolhap/7스테이지 화면의 네비게이션바 실종.png" | relative_url }}' width=500 alt='absolute'>
<figcaption>

</figcaption>
</figure>


<figure>
<img data-action="zoom" src='{{ "/assets/images/2021-03-08-gyeolhap/8스테이지 뷰에 상위 버튼 만들어줘야함.png" | relative_url }}' width=500 alt='absolute'>
<figcaption>

</figcaption>
</figure>


<figure>
<img data-action="zoom" src='{{ "/assets/images/2021-03-08-gyeolhap/9상단바에 백버튼 구현.png" | relative_url }}' width=500 alt='absolute'>
<figcaption>

</figcaption>
</figure>

## 2021-03-11


비율 0.07로 함
<figure>
<img data-action="zoom" src='{{ "/assets/images/2021-03-08-gyeolhap/10네비게이션 바대신 직접 바 생성.png" | relative_url }}' width=500 alt='absolute'>
<figcaption>

</figcaption>
</figure>

<figure>
<img data-action="zoom" src='{{ "/assets/images/2021-03-08-gyeolhap/11네비게이션 바 생성 및 기능 연결.png" | relative_url }}' width=500 alt='absolute'>
<figcaption>

</figcaption>
</figure>