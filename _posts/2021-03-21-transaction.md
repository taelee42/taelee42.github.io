---
title: Database | 트랜잭션(Transaction)이란?
tags: [Database, Computer Science]
date: 2021-03-21 20:09:00 +09:00
categories: [Database]

---

데이터베이스에 나오는 트랜잭션에 대해 알아보겠습니다.

<!--more-->
---
# 🦊 트랜잭션

-  **하나의 작업을 수행하는 데 필요한 데이터베이스 연산들의 집합**입니다.
-  데이베이스에서 논리적인 작업의 단위이기도 합니다.
- 트랜잭션의 예
  - "은행의 계좌이체를 할 때 내 계좌에서의 출금과 상대계좌에서의 입금이 한번에 일어나야한다"
  - "쇼핑몰에서 주문할 때 주문내역이 추가됨가 동시에 재고가 감소되어야 한다"
- 트랜잭션은 다음과 같은 4가지의 특성(ACID)를 만족시켜야 합니다.
  - **A**tomicity, **C**onsistency, **I**solation, **D**urability

## 원자성(Atomicity)


- 트랜잭션은 일부만 처리되어서는 안됩니다. 모든 연산을 다 성공하던지 아니면 전부 실패해야 합니다.
- 예를 들어 계좌 이체를 처리할 때 돈이 빠져나갔는데 다른사람의 돈이 입금이 안되면 안됩니다.
- 실패하면 모두 실패하거나 모두 성공해야 합니다.(All or Nothing)



## 일관성(Consistency)
- 트랜잭션이 데이터베이스의 일관성을 해치지 않습니다.
- 여기서 일관성이랑 사전에 설정해둔 제약(constraints)들을 의미합니다.
- 제약의 예: 예금의 잔액은 음수가 아니다, 이체 전후의 계좌 잔액의 총합이 같다 등
- 트랙잭션을 처리하는 중에는 잠시 데이터베이스의 일관성이 위반될 수도 있지만 그 후에는 꼭 일관성이 지켜져야 합니다.
- 예) 계좌이체 중 한쪽의 계좌에서 돈을 출금한 순간 전체 계좌 잔액의 일관성이 깨질 수 있지만 트랜잭션을 마친후에는 일관성이 지켜져야 한다.


## 격리성(Isolcation)
- 한 트랙잭션이 처리중인 중간 결과를 다른 트랜잭션이 가져다 쓸 수 없습니다.
- 예) 계좌 이체중인 중간연산결과를 다른 트랜잭션에서 접근할 수 없습니다.

## 지속성(Durability)
- 트랙잭션을 마친 결과는 시스템 장애가 오더라도 영구적으로 유지되어야 합니다.
- 예) 계좌를 이체했는데 시스템 장애가 와서 이체받은 돈이 사라지면 안됩니다.


### 참고
- [https://www.bmc.com/blogs/acid-atomic-consistent-isolated-durable/](https://www.bmc.com/blogs/acid-atomic-consistent-isolated-durable/)
- 데이터베이스 개론(김연희 지음)
